<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>Load case data from the database — getDbCaseData • CaseControl</title><!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.4.0/cosmo/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous"><script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css"><script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet"><script src="../pkgdown.js"></script><meta property="og:title" content="Load case data from the database — getDbCaseData"><meta property="og:description" content="Load all data about the cases and nesting cohort from the database."><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body data-spy="scroll" data-target="#toc">
    

    <div class="container template-reference-topic">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">CaseControl</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">3.2.0</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav"><li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu"><li>
      <a href="../articles/MultipleAnalyses.html">Running multiple analyses at once using the CaseControl package</a>
    </li>
    <li>
      <a href="../articles/SingleStudies.html">Single studies using the CaseControl package</a>
    </li>
  </ul></li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul><ul class="nav navbar-nav navbar-right"><li>
  <a href="https://github.com/OHDSI/CaseControl/" class="external-link">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul></div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Load case data from the database</h1>
    <small class="dont-index">Source: <a href="https://github.com/OHDSI/CaseControl/blob/HEAD/R/DataLoadingSaving.R" class="external-link"><code>R/DataLoadingSaving.R</code></a></small>
    <div class="hidden name"><code>getDbCaseData.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>Load all data about the cases and nesting cohort from the database.</p>
    </div>

    <div id="ref-usage">
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">getDbCaseData</span><span class="op">(</span></span>
<span>  <span class="va">connectionDetails</span>,</span>
<span>  <span class="va">cdmDatabaseSchema</span>,</span>
<span>  tempEmulationSchema <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/options.html" class="external-link">getOption</a></span><span class="op">(</span><span class="st">"sqlRenderTempEmulationSchema"</span><span class="op">)</span>,</span>
<span>  outcomeDatabaseSchema <span class="op">=</span> <span class="va">cdmDatabaseSchema</span>,</span>
<span>  outcomeTable <span class="op">=</span> <span class="st">"condition_era"</span>,</span>
<span>  outcomeIds <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="op">)</span>,</span>
<span>  useNestingCohort <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  nestingCohortDatabaseSchema <span class="op">=</span> <span class="va">cdmDatabaseSchema</span>,</span>
<span>  nestingCohortTable <span class="op">=</span> <span class="st">"cohort"</span>,</span>
<span>  nestingCohortId <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  useObservationEndAsNestingEndDate <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  getVisits <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  getExposures <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  exposureDatabaseSchema <span class="op">=</span> <span class="va">cdmDatabaseSchema</span>,</span>
<span>  exposureTable <span class="op">=</span> <span class="st">"drug_era"</span>,</span>
<span>  exposureIds <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="op">)</span>,</span>
<span>  studyStartDate <span class="op">=</span> <span class="st">""</span>,</span>
<span>  studyEndDate <span class="op">=</span> <span class="st">""</span>,</span>
<span>  maxNestingCohortSize <span class="op">=</span> <span class="fl">1e+07</span>,</span>
<span>  maxCasesPerOutcome <span class="op">=</span> <span class="fl">5e+05</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div id="arguments">
    <h2>Arguments</h2>
    <dl><dt>connectionDetails</dt>
<dd><p>An R object of type <code>ConnectionDetails</code> created
using the function <code>createConnectionDetails</code> in the
<code>DatabaseConnector</code> package.</p></dd>


<dt>cdmDatabaseSchema</dt>
<dd><p>The name of the database schema that contains the OMOP
CDM instance.  Requires read permissions to this
database. On SQL Server, this should specify both the
database and the schema, so for example
'cdm_instance.dbo'.</p></dd>


<dt>tempEmulationSchema</dt>
<dd><p>A schema where temp tables can be created in Oracle.</p></dd>


<dt>outcomeDatabaseSchema</dt>
<dd><p>The name of the database schema that is the location
where the data used to define the outcome cohorts is
available. If outcomeTable = CONDITION_ERA,
outcomeDatabaseSchema is not used.  Requires read
permissions to this database.</p></dd>


<dt>outcomeTable</dt>
<dd><p>The tablename that contains the outcome cohorts.  If
outcomeTable is not CONDITION_OCCURRENCE or
CONDITION_ERA, then expectation is outcomeTable has
format of COHORT table: COHORT_DEFINITION_ID, SUBJECT_ID,
COHORT_START_DATE, COHORT_END_DATE.</p></dd>


<dt>outcomeIds</dt>
<dd><p>A list of ids used to define outcomes.  If outcomeTable =
CONDITION_OCCURRENCE, the list is a set of ancestor
CONCEPT_IDs, and all occurrences of all descendant
concepts will be selected.  If outcomeTable &lt;&gt;
CONDITION_OCCURRENCE, the list contains records found in
COHORT_DEFINITION_ID field.</p></dd>


<dt>useNestingCohort</dt>
<dd><p>Should the study be nested in a cohort (e.g. people with
a specific indication)? If not, the study will be nested
in the general population.</p></dd>


<dt>nestingCohortDatabaseSchema</dt>
<dd><p>The name of the database schema that is the location
where the nesting cohort is defined.</p></dd>


<dt>nestingCohortTable</dt>
<dd><p>Name of the table holding the nesting cohort. This table
should have the same structure as the cohort table.</p></dd>


<dt>nestingCohortId</dt>
<dd><p>A cohort definition ID identifying the records in the
nestingCohortTable to use as nesting cohort.</p></dd>


<dt>useObservationEndAsNestingEndDate</dt>
<dd><p>When using a nesting cohort, should the observation
period end date be used instead of the cohort end date?</p></dd>


<dt>getVisits</dt>
<dd><p>Get data on visits? This is needed when matching on visit
date is requested later on.</p></dd>


<dt>getExposures</dt>
<dd><p>Should data on exposures be fetched? All exposure information
for the nesting cohort will be retrieved, which may be time-consuming.
Usually it is more efficient to fetch exposure data only for the cases
and controls, as can be done using the <code><a href="getDbExposureData.html">getDbExposureData</a></code> function.</p></dd>


<dt>exposureDatabaseSchema</dt>
<dd><p>The name of the database schema that is the location where
the exposure data used to define the exposure cohorts is
available. If exposureTable = DRUG_ERA,
exposureDatabaseSchema is not used but assumed to be
cdmSchema.  Requires read permissions to this database.</p></dd>


<dt>exposureTable</dt>
<dd><p>The tablename that contains the exposure cohorts.  If
exposureTable &lt;&gt; DRUG_ERA, then expectation is exposureTable
has format of COHORT table: cohort_concept_id, SUBJECT_ID,
COHORT_START_DATE, COHORT_END_DATE.</p></dd>


<dt>exposureIds</dt>
<dd><p>A list of identifiers to define the exposures of interest. If
exposureTable = DRUG_ERA, exposureIds should be CONCEPT_ID.
If exposureTable &lt;&gt; DRUG_ERA, exposureIds is used to select
the cohort_concept_id in the cohort-like table. If no
exposureIds are provided, all drugs or cohorts in the
exposureTable are included as exposures.</p></dd>


<dt>studyStartDate</dt>
<dd><p>A calendar date specifying the minimum date where data is
used. Date format is 'yyyymmdd'.</p></dd>


<dt>studyEndDate</dt>
<dd><p>A calendar date specifying the maximum date where data is
used. Date format is 'yyyymmdd'.</p></dd>


<dt>maxNestingCohortSize</dt>
<dd><p>If the nesting cohort is larger than
this number it will be sampled to this size. <code>maxCohortSize = 0</code>
indicates no maximum size.</p></dd>


<dt>maxCasesPerOutcome</dt>
<dd><p>If there are more than this number of cases for a single
outcome cases will be sampled to this size. <code>maxCasesPerOutcome = 0</code>
indicates no maximum size.</p></dd>

</dl></div>
    <div id="value">
    <h2>Value</h2>
    

<p>Returns an object of type <code>caseData</code>, containing information on the cases, the nesting cohort,
and optionally visits. Information about multiple outcomes can be captured at once for efficiency
reasons. The generic <code><a href="https://rdrr.io/r/base/summary.html" class="external-link">summary()</a></code> function has been implemented for this object.</p>
    </div>

  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top"><h2 data-toc-skip>Contents</h2>
    </nav></div>
</div>


      <footer><div class="copyright">
  <p></p><p>Developed by Martijn Schuemie.</p>
</div>

<div class="pkgdown">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.5.</p>
</div>

      </footer></div>

  


  

  </body></html>

